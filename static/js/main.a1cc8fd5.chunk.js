(this["webpackJsonpwatermelon-clock"]=this["webpackJsonpwatermelon-clock"]||[]).push([[0],{221:function(e,t,n){e.exports=n.p+"static/media/logo.6c4bd1c9.png"},248:function(e,t,n){e.exports=n(541)},253:function(e,t,n){},254:function(e,t,n){},261:function(e,t,n){var a=n(262);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},262:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".page-container {\n  height: 48px;\n}\n.page-header {\n  border-bottom: 1px solid #ddd;\n  width: auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.page-header .logo {\n  font-size: 22px;\n  line-height: 48px;\n  font-weight: 700;\n  margin: 0;\n}\n.page-header .logo a {\n  display: inline-block;\n  color: #333;\n  font-size: 22px;\n  line-height: 48px;\n  font-weight: 700;\n}\n.page-header .dropdown-title {\n  cursor: pointer;\n  display: inline-block;\n  vertical-align: middle;\n  user-select: none;\n}\n.page-header .dropdown-title .icon-down {\n  margin-left: 4px;\n}\n",""])},324:function(e,t,n){var a=n(325);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},325:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".page-footer {\n  color: #666;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #efefef;\n  padding: 10px 0;\n  margin-top: 60px;\n}\n.page-footer .page-footer-right {\n  display: flex;\n  align-items: center;\n}\n.page-footer .page-footer-right li {\n  margin-left: 10px;\n}\n.page-footer .page-footer-right li a {\n  color: #666;\n}\n",""])},362:function(e,t,n){var a=n(363);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},363:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".todoItem {\n  display: flex;\n  cursor: auto;\n  padding: 4px;\n  border-top: 1px solid #ddd;\n}\n.todoItem:hover {\n  background: #f9f9f9;\n}\n.todoItem.editing {\n  background: #fff4d0;\n  border-top-color: #f7edb8;\n}\n.todoItem.completed {\n  opacity: 0.5;\n  text-decoration: line-through;\n}\n.todoItem .editing-input-wrapper {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-left: 4px;\n}\n.todoItem span.text {\n  margin-left: 4px;\n}\n.todoItem textarea,\n.todoItem span.text {\n  flex: 1 1 auto;\n  outline: none;\n  border: 0;\n  background: transparent;\n}\n.todoItem .editing-input {\n  white-space: pre-line;\n  height: 22px;\n  resize: none;\n}\n.todoItem .icon-wrapper .icon-delete {\n  margin-left: 4px;\n}\n",""])},364:function(e,t,n){var a=n(365);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},365:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".todos {\n  border: 1px solid #ddd;\n  width: calc(50% - 8px);\n  border-radius: 4px;\n  box-shadow: 0 2px 0 rgba(225,225,225,0.2);\n  background: #fff;\n  padding: 16px;\n}\n.todos .todo-list {\n  margin-top: 15px;\n}\n.todos .ant-collapse-content > .ant-collapse-content-box {\n  padding: 0;\n}\n.todos .ant-collapse-item {\n  background: #fff;\n}\n.todos .ant-collapse-header {\n  user-select: none;\n}\n.todos .ant-checkbox-checked .ant-checkbox-inner {\n  background-color: #ccc;\n  border-color: #ccc;\n}\n.todos .ant-checkbox-checked::after {\n  border-color: #ccc;\n}\n.todos .no-data {\n  display: flex;\n  justify-content: center;\n}\n",""])},368:function(e,t,n){var a=n(369);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},369:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".count-down {\n  text-align: center;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  background: #f8f8f8;\n  font-size: 16px;\n  font-weight: 700;\n  padding: 3px 0;\n  position: relative;\n  overflow: hidden;\n  height: 2em;\n}\n.count-down .progress {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  z-index: 0;\n  background-image: linear-gradient(to bottom, #f8f8f8 0, #eee 100%);\n  border-radius: 4px 0 0 4px;\n  border-right: 1px solid #e9e9e9;\n}\n.count-down .time {\n  position: relative;\n  z-index: 1;\n  cursor: default;\n}\n",""])},370:function(e,t,n){var a=n(371);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},371:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".watermelon-action .start-task-btn {\n  width: 100%;\n  font-weight: 700;\n  font-size: 16px;\n}\n.watermelon-action .input-wrapper,\n.watermelon-action .count-down-wrapper {\n  position: relative;\n}\n.watermelon-action .input-wrapper .icon-close,\n.watermelon-action .count-down-wrapper .icon-close {\n  font-size: 18px;\n  position: absolute;\n  top: -9px;\n  right: -9px;\n  background: #fff;\n}\n",""])},382:function(e,t,n){var a=n(383);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},383:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".watermelon-list {\n  border-top: 1px solid #ddd;\n  margin-top: 20px;\n}\n.watermelon-list .daily-watermelons {\n  margin-top: 20px;\n}\n.watermelon-list .daily-watermelons .title {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.watermelon-list .daily-watermelons .title .date-time {\n  font-size: 1.1em;\n  color: #999;\n}\n.watermelon-list .daily-watermelons .title .finished-watermelon-number {\n  font-size: 0.9em;\n  color: #666;\n}\n.watermelon-list .watermelon-item {\n  display: flex;\n}\n.watermelon-list .watermelon-item .time-range {\n  color: #999;\n  flex-shrink: 0;\n}\n.watermelon-list .watermelon-item .description {\n  padding-left: 0.8em;\n  font-size: 1.1em;\n  color: #222;\n  word-break: break-all;\n}\n",""])},384:function(e,t,n){var a=n(385);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},385:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".no-data {\n  text-align: center;\n  padding: 20px 0;\n  border-top: 1px solid #ddd;\n  margin-top: 20px;\n}\n",""])},386:function(e,t,n){var a=n(387);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},387:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".watermelon {\n  border: 1px solid #ddd;\n  width: calc(50% - 8px);\n  border-radius: 4px;\n  box-shadow: 0 2px 0 rgba(225,225,225,0.2);\n  background: #fff;\n  padding: 16px;\n}\n",""])},388:function(e,t,n){var a=n(389);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},389:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".peity {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n",""])},390:function(e,t,n){var a=n(391);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},391:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".bar-chart {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n",""])},396:function(e,t,n){var a=n(397);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},397:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".todos-history-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n  padding: 0.5em;\n}\n.todos-history-item .text {\n  display: flex;\n  align-items: center;\n}\n.todos-history-item:hover {\n  background: #f4f4f4;\n}\n.todos-history-item:hover .action {\n  opacity: 1;\n}\n.todos-history-item .action {\n  white-space: nowrap;\n  opacity: 0;\n  color: #0881b3;\n}\n.todos-history-item .action:hover {\n  cursor: pointer;\n}\n.todos-history-item .restore {\n  margin-right: 1em;\n}\n.todos-history-item .time {\n  color: #999;\n  white-space: nowrap;\n}\n.todos-history-item .description {\n  margin-left: 1em;\n  color: #222;\n}\n.todos-history-item .clock {\n  margin-left: 5px;\n  color: #888;\n}\n",""])},398:function(e,t,n){var a=n(399);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},399:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".todos-history {\n  min-height: 33em;\n}\n.todos-history .daily-todos:last-child {\n  margin-bottom: 10px;\n}\n.todos-history .daily-todos {\n  background: #fff;\n  border: 1px solid #ddd;\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1);\n  padding: 1em;\n  border-radius: 3px;\n  margin-top: 10px;\n  display: flex;\n}\n.todos-history .daily-todos .summary {\n  margin-right: 8px;\n}\n.todos-history .daily-todos p {\n  margin: 0;\n}\n.todos-history .daily-todos .year-month-day {\n  color: #222;\n  font-size: 1em;\n}\n.todos-history .daily-todos .day {\n  margin-left: 10px;\n  color: #888;\n  font-size: 0.9em;\n}\n.todos-history .daily-todos .finished-todos-count {\n  color: #888;\n  font-size: 0.9em;\n  margin-top: 7.2px;\n}\n.todos-history .daily-todos .todos-list {\n  flex: 1;\n}\n.tab-pane-page-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tab-pane-page-footer .total-num-of-todos {\n  margin: 0;\n  font-size: 14px;\n  color: #888;\n}\n",""])},418:function(e,t,n){var a=n(419);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},419:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".watermelonsHistoryItem {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n  padding: 0.5em;\n}\n.watermelonsHistoryItem:hover,\n.watermelonsHistoryItem.editable {\n  background: #f4f4f4;\n}\n.watermelonsHistoryItem:hover .action,\n.watermelonsHistoryItem.editable .action {\n  opacity: 1;\n}\n.watermelonsHistoryItem .action {\n  white-space: nowrap;\n  opacity: 0;\n  color: #0881b3;\n}\n.watermelonsHistoryItem .action:hover {\n  cursor: pointer;\n}\n.watermelonsHistoryItem p {\n  margin-bottom: 0;\n}\n.watermelonsHistoryItem .text {\n  display: flex;\n  align-items: center;\n  width: calc(90% - 1em);\n}\n.watermelonsHistoryItem .edit,\n.watermelonsHistoryItem .submit {\n  margin-right: 1em;\n}\n.watermelonsHistoryItem .time {\n  color: #999;\n  flex-shrink: 0;\n}\n.watermelonsHistoryItem .description,\n.watermelonsHistoryItem textarea {\n  margin-left: 1em;\n  color: #222;\n  word-break: break-all;\n}\n.watermelonsHistoryItem .null {\n  color: #999;\n}\n.watermelonsHistoryItem textarea {\n  border: 1px solid #ccc;\n  padding: 6px 4px;\n  outline: 0;\n  border-radius: 2px;\n  color: #777;\n  max-width: 100%;\n  width: 100%;\n  display: block;\n  background: #fff;\n  vertical-align: top;\n  overflow: hidden;\n  overflow-wrap: break-word;\n  resize: horizontal;\n}\n.watermelonsHistoryItem .supply-info {\n  color: #ff7676;\n}\n",""])},425:function(e,t,n){var a=n(426);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},426:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".new-watermelon-pane {\n  background: #f9f9f9;\n  border: 1px solid #ddd;\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1);\n  padding: 1em;\n  border-radius: 3px;\n  margin-bottom: 0.6em;\n  font-size: 14px;\n}\n.new-watermelon-pane .submit-btn {\n  margin-right: 10px;\n}\n",""])},523:function(e,t,n){var a=n(524);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},524:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".watermelons-history {\n  min-height: 33em;\n}\n.watermelons-history .daily-watermelons:last-child {\n  margin-bottom: 10px;\n}\n.watermelons-history .daily-watermelons {\n  background: #fff;\n  border: 1px solid #ddd;\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1);\n  padding: 1em;\n  border-radius: 3px;\n  margin-top: 10px;\n  display: flex;\n}\n.watermelons-history .daily-watermelons .summary {\n  margin-right: 8px;\n}\n.watermelons-history .daily-watermelons .date {\n  margin: 0;\n}\n.watermelons-history .daily-watermelons .year-month-day {\n  color: #222;\n  font-size: 1em;\n}\n.watermelons-history .daily-watermelons .day {\n  margin-left: 10px;\n  color: #888;\n  font-size: 0.9em;\n}\n.watermelons-history .daily-watermelons .finished-todos-count {\n  color: #888;\n  font-size: 0.9em;\n  margin-top: 7.2px;\n}\n.watermelons-history .daily-watermelons .watermelons-list {\n  flex: 1;\n}\n.tab-pane-page-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tab-pane-page-footer .total-num-of-todos {\n  margin: 0;\n  font-size: 14px;\n  color: #888;\n}\n",""])},525:function(e,t,n){var a=n(526);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},526:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".dot-line {\n  padding: 0 16px 16px;\n}\n.dot-line svg {\n  overflow: hidden;\n}\n.dot-line rect {\n  fill: #f4f4f4;\n  stroke: #ddd;\n  stroke-width: 0.5;\n}\n.dot-line path {\n  stroke: rgba(200,40,41,0.6);\n  stroke-width: 2.5px;\n  fill: none;\n}\n.dot-line text {\n  fill: rgba(200,40,41,0.6);\n  font-size: 1rem;\n}\n.dot-line circle {\n  stroke: rgba(200,40,41,0.8);\n  fill: #fff;\n  stroke-width: 2px;\n}\n",""])},527:function(e,t,n){var a=n(528);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},528:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".monthly-history-core .monthly-action {\n  padding-bottom: 0.7em;\n  display: flex;\n  align-items: center;\n}\n.monthly-history-core .monthly-action-year,\n.monthly-history-core .monthly-action-month {\n  margin-left: 15px;\n}\n.monthly-history-core .monthly-action-text {\n  margin-left: 8px;\n}\n.monthly-history-core .monthly-history-statistics-wrapper {\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n.monthly-history-core ul {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #ddd;\n}\n.monthly-history-core li {\n  padding: 0.7em 0;\n  text-align: center;\n  border-right: 1px solid #ddd;\n  flex: 1;\n}\n.monthly-history-core li:last-child {\n  border-right: 0;\n}\n.monthly-history-core li>strong {\n  margin-right: 0.3em;\n  color: #333;\n  font-size: 1.8em;\n}\n.monthly-history-core .unit {\n  font-size: 16px;\n  color: #222;\n}\n.monthly-history-core .monthlyIncrease {\n  color: #d74e4e;\n}\n.monthly-history-core .growable {\n  color: #3d9400;\n}\n",""])},529:function(e,t,n){var a=n(530);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},530:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,"",""])},531:function(e,t,n){var a=n(532);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},532:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".statistics {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: 1px solid #e4e4e4;\n  border-radius: 4px;\n  margin-bottom: 0;\n}\n.statistics>li {\n  flex: 1;\n  border-left: 1px solid #e4e4e4;\n  cursor: pointer;\n  max-width: 320px;\n  max-height: 90px;\n  position: relative;\n  font-weight: 500;\n  text-align: left;\n}\n.statistics>li.visible {\n  background: #f4f4f4;\n}\n.statistics>li:first-child {\n  border-left: none;\n}\n.statistics>li h3,\n.statistics>li .description {\n  margin-bottom: 0;\n}\n.statistics>li h3 {\n  padding: 10px 10px 0;\n  color: #666;\n  font-size: 14px;\n  line-height: 14px;\n}\n.statistics>li .description-wrapper {\n  padding-left: 10px;\n  text-align: left;\n  display: inline-flex;\n  flex-direction: column;\n}\n.statistics>li .description {\n  font-size: 12px;\n  color: #999;\n  display: inline-block;\n  line-height: 12px;\n  padding: 6px 0 2px;\n}\n.statistics>li .number {\n  display: inline-block;\n  font-size: 30px;\n  color: #666;\n  font-weight: 400;\n  line-height: 34px;\n  padding: 2px 0 10px;\n}\n.history-wrapper {\n  background: #fff;\n  margin-top: 20px;\n}\n.history-wrapper .monthlyTitle,\n.history-wrapper .watermelonTitle,\n.history-wrapper .todosTitle {\n  display: none;\n  padding: 16px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  box-shadow: 0 2px 0 rgba(225,225,225,0.2);\n}\n.history-wrapper .visible {\n  display: block;\n}\n",""])},533:function(e,t,n){var a=n(534);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},534:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,"#Home {\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 16px;\n}\n#Home main.content {\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n}\n#Home main.statistics-content {\n  margin-top: 20px;\n}\n@media (max-width: 756px) {\n  #Home .page-footer {\n    flex-direction: column;\n  }\n  #Home .page-footer p.copyright {\n    margin: 0;\n  }\n  #Home main.content {\n    flex-direction: column;\n  }\n  #Home main.content .watermelon,\n  #Home main.content .todos {\n    width: 100%;\n  }\n  #Home main.content .todos {\n    margin-top: 20px;\n  }\n  #Home main.statistics-content .statistics {\n    flex-direction: column;\n  }\n  #Home main.statistics-content .statistics li {\n    border: none;\n    border-bottom: 1px solid #e4e4e4;\n    max-width: 100%;\n    width: 100%;\n  }\n  #Home main.statistics-content .statistics li:last-child {\n    border: none;\n  }\n  #Home main.statistics-content .history-wrapper .monthly-action {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  #Home main.statistics-content .history-wrapper .monthly-action .monthly-action-year,\n  #Home main.statistics-content .history-wrapper .monthly-action .monthly-action-month {\n    margin: 0;\n  }\n  #Home main.statistics-content .history-wrapper .monthly-action .monthly-action-title,\n  #Home main.statistics-content .history-wrapper .monthly-action .monthly-action-year {\n    margin-bottom: 10px;\n  }\n  #Home main.statistics-content .history-wrapper .monthly-history-statistics-wrapper ul {\n    flex-direction: column;\n  }\n  #Home main.statistics-content .history-wrapper .monthly-history-statistics-wrapper ul li {\n    border: none;\n  }\n  #Home main.statistics-content .history-wrapper .watermelonTitle .daily-watermelons {\n    flex-direction: column;\n  }\n  #Home main.statistics-content .history-wrapper .watermelonTitle .daily-watermelons .summary,\n  #Home main.statistics-content .history-wrapper .watermelonTitle .daily-watermelons .date-wrapper p {\n    margin: 0;\n  }\n  #Home main.statistics-content .history-wrapper .watermelonTitle .daily-watermelons .date-wrapper {\n    display: flex;\n  }\n  #Home main.statistics-content .history-wrapper .watermelonTitle .daily-watermelons .date-wrapper .finished-watermelons-count {\n    margin-left: 10px;\n  }\n  #Home main.statistics-content .history-wrapper .todosTitle .daily-todos {\n    flex-direction: column;\n  }\n  #Home main.statistics-content .history-wrapper .todosTitle .daily-todos .summary,\n  #Home main.statistics-content .history-wrapper .todosTitle .daily-todos .date-wrapper p {\n    margin: 0;\n  }\n  #Home main.statistics-content .history-wrapper .todosTitle .daily-todos .date-wrapper {\n    display: flex;\n  }\n  #Home main.statistics-content .history-wrapper .todosTitle .daily-todos .date-wrapper .finished-todos-count {\n    margin-left: 10px;\n  }\n}\n",""])},536:function(e,t,n){var a=n(537);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},537:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".page-login {\n  max-width: 500px;\n  margin: 50px auto;\n  padding-left: 100px;\n  padding-right: 100px;\n}\n.page-login input {\n  margin: 5px auto;\n}\n.page-login .login-header {\n  font-size: 42px;\n  font-weight: 400;\n  text-align: center;\n}\n.page-login .login-btn {\n  width: 100%;\n  margin-top: 20px;\n}\n.page-login .register-link {\n  margin-top: 25px;\n}\n.page-login .ant-input-affix-wrapper {\n  align-items: center;\n}\n",""])},539:function(e,t,n){var a=n(540);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(26)(a,r);a.locals&&(e.exports=a.locals)},540:function(e,t,n){(e.exports=n(25)(!1)).push([e.i,".page-sign-up {\n  max-width: 500px;\n  margin: 50px auto;\n  padding-left: 100px;\n  padding-right: 100px;\n}\n.page-sign-up input {\n  margin: 5px auto;\n}\n.page-sign-up .sign-up-header {\n  font-size: 42px;\n  font-weight: 400;\n  text-align: center;\n}\n.page-sign-up .sign-up-btn {\n  width: 100%;\n  margin-top: 20px;\n}\n.page-sign-up .login-link {\n  margin-top: 25px;\n}\n.page-sign-up .ant-input-affix-wrapper {\n  align-items: center;\n}\n",""])},541:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),i=n.n(o),s=(n(253),n(254),n(18)),c=n(15),l=n.n(c),d=n(6),u=n(7),p=n(9),m=n(8),h=n(10),f=(n(255),n(246)),g=(n(258),n(138)),y=n(545),b=n(546),v=n(547),w=n(36),x="";x="/watermelon-clock";var E=Object(w.a)({basename:x}),O=n(221),k=n.n(O),j=(n(261),r.a.createElement(g.a,null,r.a.createElement(g.a.Item,{key:"0"},r.a.createElement(y.a,null),"\u4e2a\u4eba\u8bbe\u7f6e"),r.a.createElement(g.a.Item,{key:"1",onClick:function(){localStorage.setItem("x-token",""),E.push("/login")}},r.a.createElement(b.a,null),"\u767b\u51fa"))),T=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-header page-container"},r.a.createElement("h1",{className:"logo"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:k.a,alt:"",width:"50"}),"\u23f0")),r.a.createElement(f.a,{overlay:j,trigger:["click"]},r.a.createElement("span",{className:"dropdown-title"},"\ud83c\udf83",this.props.userInfo&&this.props.userInfo.account,r.a.createElement(v.a,{className:"icon-down"}))))}}]),t}(a.Component),N=(n(324),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-footer"},r.a.createElement("p",{className:"copyright"},r.a.createElement("span",null,"\xa9"),r.a.createElement("span",null,"2020 strugglebak")),r.a.createElement("ul",{className:"page-footer-right"},r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/strugglebak"},"\u5f00\u53d1\u8005")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/strugglebak/watermelon-clock"},"\u4ed3\u5e93\u5730\u5740"))))}}]),t}(a.Component)),M=(n(326),n(178)),C=(n(100),n(34)),D=n(548),S=n(20),W=function(e){return{type:"UPDATE_TODO",payload:e}},I=n(227),R=n.n(I).a.create({baseURL:"https://gp-server.hunger-valley.com",headers:{"t-app-id":"PQ2epU1JRZiN9mCbY2F68kTw ","t-app-secret":"H2yBbH9gizUgN8vPiFNgXeGr"}});R.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.log("request error: ",e),Promise.reject(e)})),R.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return(e.response&&401===e.response.status||e.response.status>=500)&&(console.log(E.location.pathname),"/"===E.location.pathname&&E.push("/login")),Promise.reject(e)}));var A,H=R,_=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onFocus=function(e){n.setState({focus:!0})},n.onBlur=function(e){n.setState({focus:!1})},n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.description&&n.addTodo()},n.onChange=function(e){n.setState({description:e.target.value})},n.addTodo=function(){var e,t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.state.description,a.prev=1,a.next=4,l.a.awrap(H.post("/todos",{description:e}));case 4:t=a.sent,n.props.addTodo(t.data.resource),a.next=11;break;case 8:throw a.prev=8,a.t0=a.catch(1),new Error(a.t0);case 11:n.setState({description:""});case 12:case"end":return a.stop()}}),null,null,[[1,8]])},n.onMouseEnter=function(e){n.setState({mouseFocus:!0})},n.onMouseLeave=function(e){n.setState({mouseFocus:!1})},n.state={description:"",focus:!1,mouseFocus:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.mouseFocus,n=e.description||t?r.a.createElement(D.a,{style:{fontSize:"18px",cursor:"pointer"},onClick:this.addTodo}):r.a.createElement("span",null);return r.a.createElement("div",{className:"todo-input"},r.a.createElement(C.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",onFocus:this.onFocus,onBlur:this.onBlur,onKeyUp:this.onKeyUp,onChange:this.onChange,value:this.state.description,suffix:n,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}))}}]),t}(a.Component),P={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},z=Object(S.b)((function(e,t){return Object(s.a)({},t)}),P)(_),F=(n(360),n(247)),U=n(549),K=n(2),L=n.n(K),Y=(n(362),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).update=function(e){var t,a;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.props.id,e.completed&&(e.completed_at=new Date),r.prev=2,r.next=5,l.a.awrap(H.put("/todos/".concat(t),e));case 5:a=r.sent,n.props.updateTodo(a.data.resource),r.next=12;break;case 9:throw r.prev=9,r.t0=r.catch(2),new Error(r.t0);case 12:case"end":return r.stop()}}),null,null,[[2,9]])},n.getIntoEditingState=function(){n.props.editingTodo(n.props.id)},n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.editingText&&n.update({description:n.state.editingText,editing:!1})},n.onBlur=function(e){n.update({description:n.state.editingText,editing:!1})},n.state={editingText:n.props.description},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"editing-input-wrapper"},r.a.createElement("textarea",{className:"editing-input",value:this.state.editingText,onChange:function(t){return e.setState({editingText:t.target.value.trim()})},onKeyUp:this.onKeyUp,onBlur:this.onBlur}),r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement(D.a,{className:"icon-enter",style:{cursor:"pointer",fontSize:"16px"},onClick:function(t){return e.update({description:e.state.editingText})}}),r.a.createElement(U.a,{className:"icon-delete",style:{cursor:"pointer",fontSize:"16px"},onClick:function(t){return e.update({deleted:!0})}}))),n=r.a.createElement("span",{className:"text",onDoubleClick:this.getIntoEditingState},this.props.description),a=L()({todoItem:!0,editing:this.props.editing,completed:this.props.completed});return r.a.createElement("li",{className:a},r.a.createElement(F.a,{className:"checkbox",checked:this.props.completed,onChange:function(t){return e.update({completed:t.target.checked})}}),this.props.editing?t:n)}}]),t}(a.Component)),B={editingTodo:function(e){return{type:"EDITING_TODO",payload:e}},updateTodo:W},V=Object(S.b)((function(e,t){return Object(s.a)({},t)}),B)(Y),q=n(550),G=(n(364),M.a.Panel),J=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"todos"},r.a.createElement(z,null),r.a.createElement("main",null,r.a.createElement("ul",{className:"todo-list"},this.unCompletedTodos.length<=0&&r.a.createElement("div",{className:"no-data"},r.a.createElement(q.a,{style:{fontSize:"15em",color:"#eee"}})),this.unCompletedTodos.map((function(e){return r.a.createElement(V,Object.assign({key:e.id},e))})),this.completedTodos.length>0&&r.a.createElement(M.a,{bordered:!1,defaultActiveKey:["1"]},r.a.createElement(G,{header:"\u6700\u8fd1\u5b8c\u6210\u7684\u4efb\u52a1\u2714",key:"1"},this.completedTodos.map((function(e){return r.a.createElement(V,Object.assign({key:e.id},e))})))))))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.deleted}))}},{key:"unCompletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.completed&&!e.deleted}))}},{key:"completedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted})).splice(0,10)}}]),t}(a.Component),Q={updateTodo:W},X=Object(S.b)((function(e,t){return Object(s.a)({todos:e.todosReducer},t)}),Q)(J),Z=(n(58),n(22)),$=(n(366),n(245)),ee=n(551),te=n(135),ne=(n(368),function(e){var t=Object(a.useState)(e.time),n=Object(te.a)(t,2),o=n[0],i=n[1],s=Math.floor(o/1e3/60),c=Math.floor(o/1e3%60),l="".concat(s<10?"0".concat(s):s,":").concat(c<10?"0".concat(c):c),d=e.duration,u=Math.floor(100-100*o/d);return Object(a.useEffect)((function(){return document.title="".concat(l," - \u897f\u74dc\u95f9\u949f App"),A=setInterval((function(){i(o-1e3),o<0&&(document.title="\u897f\u74dc\u95f9\u949f App",e.onEnd(),window.clearInterval(A))}),1e3),function(){window.clearInterval(A),document.title="\u897f\u74dc\u95f9\u949f App"}})),r.a.createElement("div",{className:"count-down"},r.a.createElement("div",{className:"progress",style:{width:"".concat(u,"%")}}),r.a.createElement("p",{className:"time"},l))}),ae=(n(370),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onEnd=function(){n.forceUpdate()},n.onKeyUp=function(e){var t=n.state.description,a=new Date;13===e.keyCode&&""!==t&&(n.updateWaterMelon({description:t,ended_at:a}),n.setState({description:""}))},n.abortWaterMelon=function(e){var t=n.state.description;13===e.keyCode&&""!==t&&(n.updateWaterMelon({aborted:!0}),n.setState({description:"",visible:!1}))},n.updateWaterMelon=function(e){var t,a;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.props.unFinishedWaterMelon.id,r.prev=1,r.next=4,l.a.awrap(H.put("/tomatoes/".concat(t),e));case 4:a=r.sent,n.props.updateWaterMelon(a.data.resource),r.next=11;break;case 8:throw r.prev=8,r.t0=r.catch(1),new Error(r.t0);case 11:case"end":return r.stop()}}),null,null,[[1,8]])},n.handleOk=function(e){var t=n.state.description,a=new Date;n.updateWaterMelon({description:t,ended_at:a}),n.setState({description:"",visible:!1})},n.handleCancel=function(e){n.setState({visible:!1})},n.abort=function(){n.setState({visible:!0})},n.state={description:"",visible:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.unFinishedWaterMelon,n=r.a.createElement("div",null),a=r.a.createElement($.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,okText:"\u653e\u5f03\ud83c\udf49",cancelText:"\u53d6\u6d88"},r.a.createElement("h3",{style:{textAlign:"center"}},"\u4f60\u88ab\u4ec0\u4e48\u4e8b\u60c5\u6253\u65ad\u4e86?"),r.a.createElement(C.a,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:function(t){return e.abortWaterMelon(t)}})),o=r.a.createElement(ee.a,{className:"icon-close",style:{color:"#bbb",cursor:"pointer"},onClick:this.abort});if(void 0===t)n=r.a.createElement(Z.a,{className:"start-task-btn",onClick:this.props.startWaterMelon},"\u5f00\u59cb\ud83c\udf49");else{var i=Date.parse(t.started_at),s=(new Date).getTime()-i,c=t.duration;if(s>=c)n=r.a.createElement("div",{className:"input-wrapper"},r.a.createElement(C.a,{placeholder:"\u4f60\u521a\u521a\u5b8c\u6210\u4e86\u4ec0\u4e48\u5de5\u4f5c?",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:function(t){return e.onKeyUp(t)}}),o);else if(s<c){var l=c-s;n=r.a.createElement("div",{className:"count-down-wrapper"},r.a.createElement(ne,{time:l,onEnd:this.onEnd,duration:c}),o)}}return r.a.createElement("div",{className:"watermelon-action"},n,a)}}]),t}(a.Component)),re=n(544),oe=(n(382),function(e){return r.a.createElement("li",{className:"watermelon-item"},r.a.createElement("span",{className:"time-range"},Object(re.a)(new Date(e.started_at),"H:mm")," - ",Object(re.a)(new Date(e.ended_at),"H:mm")),r.a.createElement("span",{className:"description"},e.description))}),ie=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.datesKeys.map((function(t){var n=e.props.finishedWaterMelons[t];return r.a.createElement("li",{className:"daily-watermelons",key:t},r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"date-time"},Object(re.a)(new Date(t),"M\u6708d\u65e5")),r.a.createElement("span",{className:"finished-watermelon-number"},"\u5b8c\u6210\u4e86 ",n.length," \u4e2a\u897f\u74dc")),r.a.createElement("ul",{className:"watermelon-list-detail"},n.map((function(e){return r.a.createElement(oe,Object.assign({key:e.id},e))}))))}));return r.a.createElement("ul",{className:"watermelon-list"},t)}},{key:"datesKeys",get:function(){return Object.keys(this.props.finishedWaterMelons).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),t}(a.Component),se=function(e){return{type:"ADD_WATERMELON",payload:e}},ce=function(e){return{type:"UPDATE_WATERMELON",payload:e}},le=n(56),de=n.n(le),ue=n(552),pe=(n(384),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"no-data"},r.a.createElement(ue.a,{style:{fontSize:"15em",color:"#eee"}}),r.a.createElement("p",{className:"no-record"},"\u6ca1\u6709\u8bb0\u5f55"))}}]),t}(a.Component)),me=(n(386),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).startWaterMelon=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(H.post("/tomatoes",{duration:15e5}));case 3:e=t.sent,n.props.addWaterMelon(e.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=r.a.createElement(ie,{finishedWaterMelons:this.finishedWaterMelons}),t=r.a.createElement(pe,null);return r.a.createElement("div",{className:"watermelon"},r.a.createElement(ae,{startWaterMelon:this.startWaterMelon,unFinishedWaterMelon:this.unFinishedWaterMelon,updateWaterMelon:this.props.updateWaterMelon}),Object.keys(this.finishedWaterMelons).length>0?e:t)}},{key:"unFinishedWaterMelon",get:function(){return this.props.waterMelons.filter((function(e){var t;return!e.description&&!e.ended_at&&!e.aborted&&!(null===e||void 0===e?void 0:null===(t=e.extra)||void 0===t?void 0:t.deleted)}))[0]}},{key:"finishedWaterMelons",get:function(){var e=this.props.waterMelons.filter((function(e){var t;return e.description&&e.ended_at&&!e.aborted&&!(null===e||void 0===e?void 0:null===(t=e.extra)||void 0===t?void 0:t.deleted)}));return de.a.groupBy(e,(function(e){return Object(re.a)(new Date(e.started_at),"yyyy-M-d")}))}}]),t}(a.Component)),he={addWaterMelon:se,updateWaterMelon:ce},fe=Object(S.b)((function(e,t){return Object(s.a)({waterMelons:e.waterMelonReducer},t)}),he)(me),ge=n(41),ye=(n(388),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).points=function(){var e=n.props,t=e.data,a=e.finishedCount,r=e.width,o=Object.keys(t).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),i=o[0],s="".concat(r,",60");if(!i)return["".concat("0,60"),"".concat(s)].join(" ");var c,l=o[o.length-1],d=Date.parse(l)-Date.parse(i)||1,u=0,p=o.map((function(e){var t=(Date.parse(e)-Date.parse(i))/d*(r||320),o=60*(1-(u+=n.props.data[e].length)/a);return c=o,"".concat(t,",").concat(o)}));return["".concat("0,60")].concat(Object(ge.a)(p),["".concat(r,",").concat(c),"".concat(s)]).join(" ")},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("svg",{className:"polyline peity",width:"100%",height:"60"},r.a.createElement("polygon",{fill:"rgba(215,78,78,0.1)",points:this.points()}),r.a.createElement("polygon",{fill:"none",stroke:"rgba(215,78,78,0.5)",strokeWidth:"1",strokeLinecap:"square",points:this.points()}))}}]),t}(a.Component)),be=(n(390),60),ve=3,we=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).points=function(){var e=n.props,t=e.data,a=e.finishedCount,r=t.reduce((function(e,t){return e>t.length?e:t.length}),0);return t.map((function(e,t){var n=(t+ve)/10*a-8,o=(1-e.length/(r||1))*be;return o>=be&&(o=be-1),[n,o]}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("svg",{className:"bar-chart",width:"100%",height:be},this.points().map((function(e,t){return r.a.createElement("rect",{key:t,fill:"rgba(215,78,78,0.5)",x:e[0],y:e[1],width:16,height:be-e[1]||0})})))}}]),t}(a.Component),xe=(n(219),n(96)),Ee=(n(157),n(63));function Oe(e){return["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"][parseInt(Object(re.a)(new Date(e),"i"),10)-1]}function ke(e){var t=e.split("-");return"".concat(t[0],"\u5e74").concat(t[1],"\u6708").concat(t[2],"\u65e5")}function je(e,t,n){var a=Object(re.a)(new Date(e),t),r=a.split("-");return"finished"===n||"aborted"===n?a:"".concat(r[0],"\u5e74").concat(r[1],"\u6708").concat(r[2],"\u65e5")}n(396);var Te=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).update=function(e,t){var a,r;return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.todo.id,e.prev=1,e.next=4,l.a.awrap(H.put("/todos/".concat(a),t));case 4:r=e.sent,n.props.updateTodo(r.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),null,null,[[1,8]])},n.changeActionText=function(e){var t=e.submit;"restore"===e.className&&(t?n.changeRestoreText("\u63d0\u4ea4\u4e2d..."):n.changeRestoreText("\u6062\u590d"))},n.changeRestoreText=function(e){n.setState({restoreText:e})},n.changeDeleteText=function(e){n.setState({deleteText:e})},n.state={restoreText:"\u6062\u590d",deleteText:"\u5220\u9664"},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.todo,a=n.updated_at,o=n.created_at,i=n.description,s=this.props.itemType,c={finished:{formatText:"HH:mm",time:a,action:r.a.createElement("div",{className:"action"},r.a.createElement("span",{className:"restore",onClick:function(e){return t.update(e,{completed:!1})}},this.state.restoreText),r.a.createElement("span",{className:"delete",onClick:function(e){return t.update(e,{deleted:!0})}},this.state.deleteText))},deleted:{formatText:"yyyy-MM-dd",time:o,action:r.a.createElement("div",{className:"action"},r.a.createElement("span",{className:"restore",onClick:function(e){return t.update(e,{deleted:!1})}},this.state.restoreText))}}[s],l=c.formatText,d=c.time,u=c.action,p=r.a.createElement("span",{className:"clock"},(e=d,Object(re.a)(new Date(e),"HH:mm")));return r.a.createElement("div",{className:"todos-history-item"},r.a.createElement("div",{className:"text"},r.a.createElement("span",{className:"time"},je(d,l,s)),"deleted"===s?p:null,r.a.createElement("span",{className:"description"},i)),u)}}]),t}(a.Component),Ne={updateTodo:W},Me=Object(S.b)((function(e,t){return Object(s.a)({},t)}),Ne)(Te),Ce=(n(398),Ee.a.TabPane),De=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).togglePagination=function(e){n.setState({currentPage:e})},n.toggleDeletedPagination=function(e){n.setState({deletedCurrentPage:e})},n.state={currentPage:1,deletedCurrentPage:1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.finishedDatesKeys.map((function(t){var n=e.dailyFinishedTodos[t];return r.a.createElement("div",{className:"daily-todos",key:t},r.a.createElement("div",{className:"summary"},r.a.createElement("div",{className:"date-wrapper"},r.a.createElement("p",{className:"date"},r.a.createElement("span",{className:"year-month-day"},ke(t)),r.a.createElement("span",{className:"day"},Oe(t))),r.a.createElement("p",{className:"finished-todos-count"},"\u5b8c\u6210\u4e86 ",n.length," \u4e2a\u4efb\u52a1"))),r.a.createElement("div",{className:"todos-list"},n.map((function(e){return r.a.createElement(Me,{key:e.id,todo:e,itemType:"finished"})}))))})),n=this.state.deletedCurrentPage,a=this.deletedTodos.slice(12*(n-1),12*n).map((function(e){return r.a.createElement(Me,{key:e.id,todo:e,itemType:"deleted"})}));return r.a.createElement(Ee.a,{defaultActiveKey:"1",type:"card"},r.a.createElement(Ce,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},r.a.createElement("div",{className:"todos-history"},t),r.a.createElement("div",{className:"tab-pane-page-footer"},r.a.createElement(xe.a,{defaultCurrent:1,pageSize:3,hideOnSinglePage:!0,total:Object.keys(this.dailyFinishedTodos).length,current:this.state.currentPage,onChange:this.togglePagination}),r.a.createElement("div",null),r.a.createElement("p",{className:"total-num-of-todos"},"\u603b\u8ba1 ",this.finishedTodosLength," \u4e2a\u5df2\u5b8c\u6210\u7684\u4efb\u52a1"))),r.a.createElement(Ce,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},r.a.createElement("div",{className:"todos-history"},a),r.a.createElement("div",{className:"tab-pane-page-footer"},r.a.createElement(xe.a,{defaultCurrent:1,pageSize:12,hideOnSinglePage:!0,total:this.deletedTodos.length,current:this.state.deletedCurrentPage,onChange:this.toggleDeletedPagination}),r.a.createElement("div",null),r.a.createElement("p",{className:"total-num-of-todos"},"\u603b\u8ba1 ",this.deletedTodosLength," \u4e2a\u5df2\u5220\u9664\u7684\u4efb\u52a1"))))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"deletedTodos",get:function(){return this.props.todos.filter((function(e){return e.deleted}))}},{key:"dailyFinishedTodos",get:function(){return de.a.groupBy(this.finishedTodos,(function(e){return Object(re.a)(new Date(e.updated_at),"yyyy-MM-dd")}))}},{key:"finishedDatesKeys",get:function(){var e=this.state.currentPage;return Object.keys(this.dailyFinishedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).slice(3*(e-1),3*e)}},{key:"finishedTodosLength",get:function(){return this.finishedTodos.length}},{key:"deletedTodosLength",get:function(){return this.deletedTodos.length}}]),t}(a.Component),Se=Object(S.b)((function(e,t){return Object(s.a)({todos:e.todosReducer},t)}))(De),We=(n(141),n(95)),Ie=n(553),Re=n(554),Ae=(n(418),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).update=function(e,t){var a,r;return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.watermelon.id,e.prev=1,e.next=4,l.a.awrap(H.put("/tomatoes/".concat(a),t));case 4:r=e.sent,n.props.updateWaterMelon(r.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),null,null,[[1,8]])},n.changeActionText=function(e){var t=e.submit;"edit"===e.className?t?n.changeEditText("\u63d0\u4ea4\u4e2d..."):n.changeEditText("\u7f16\u8f91"):t?n.changeDeleteText("\u63d0\u4ea4\u4e2d..."):n.changeDeleteText("\u5220\u9664")},n.changeEditText=function(e){n.setState({editText:e})},n.changeDeleteText=function(e){n.setState({deleteText:e})},n.onEditClick=function(e){var t=n.props.watermelon.description;n.setState({editable:!0,editingText:t||void 0}),n.changeEditText("\u63d0\u4ea4"),n.changeDeleteText("\u53d6\u6d88")},n.onDeleteClick=function(e){var t=n.props.watermelon,a=t.description,r=t.aborted;n.update(e,{description:a,aborted:r,extra:{deleted:!0}})},n.onSubmitClick=function(e){n.update(e,{description:n.state.editingText,aborted:"aborted"===n.props.itemType}),n.setState({editable:!1}),n.changeEditText("\u7f16\u8f91"),n.changeDeleteText("\u5220\u9664")},n.onCancelClick=function(e){n.setState({editable:!1}),n.changeEditText("\u7f16\u8f91"),n.changeDeleteText("\u5220\u9664")},n.onEditingChange=function(e){!n.state.isEnterCode&&n.resize(),n.setState({editingText:e.target.value})},n.onEditingKeyDown=function(e){13===e.keyCode&&""!==n.state.editingText&&(n.setState({editable:!1,isEnterCode:!0}),n.changeEditText("\u7f16\u8f91"),n.changeDeleteText("\u5220\u9664"),n.update(e,{description:n.state.editingText,aborted:"aborted"===n.props.itemType}))},n.onEditingFocus=function(e){n.resize()},n.resize=function(){if(n.inputRef){var e=n.inputRef.current,t=e.style;t.height="auto",t.height=e.scrollHeight+"px"}},n.inputRef=r.a.createRef(),n.state={editText:"\u7f16\u8f91",deleteText:"\u5220\u9664",editable:!1,editingText:n.props.watermelon.description,isEnterCode:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.watermelon,n=t.updated_at,a=t.created_at,o=t.description,i=t.manually_created,s=this.props.itemType,c=i?r.a.createElement("p",{className:"supply"},r.a.createElement("span",null,o),r.a.createElement("span",{className:"supply-info"},"\uff08\u8865\uff09")):o,l=r.a.createElement("div",{className:"description"},c||r.a.createElement("span",{className:"null"},"\ud83c\udf49\u63cf\u8ff0\u4e3a\u7a7a")),d=r.a.createElement("textarea",{ref:this.inputRef,rows:1,cols:30,className:"editing-input",value:this.state.editingText,onChange:function(t){return e.onEditingChange(t)},onKeyDown:function(t){return e.onEditingKeyDown(t)},onFocus:function(t){return e.onEditingFocus(t)}}),u=r.a.createElement("div",{className:"action"},r.a.createElement("span",{className:"edit",onClick:function(t){return e.onEditClick(t)}},this.state.editText),r.a.createElement("span",{className:"delete",onClick:function(t){return e.onDeleteClick(t)}},this.state.deleteText)),p=r.a.createElement("div",{className:"action"},r.a.createElement("span",{className:"submit",onClick:function(t){return e.onSubmitClick(t)}},this.state.editText),r.a.createElement("span",{className:"cancel",onClick:function(t){return e.onCancelClick(t)}},this.state.deleteText)),m=this.state.editable?d:l,h=this.state.editable?p:u,f=L()({watermelonsHistoryItem:!0,editable:this.state.editable});return r.a.createElement("div",{className:f},r.a.createElement("div",{className:"text"},r.a.createElement("p",{className:"time"},je(a,"HH:mm",s),r.a.createElement("span",null," - "),je(n,"HH:mm",s)),m),h)}}]),t}(a.Component)),He={updateWaterMelon:ce},_e=Object(S.b)((function(e,t){return Object(s.a)({},t)}),He)(Ae),Pe=(n(220),n(97)),ze=(n(159),n(35)),Fe=(n(168),n(79)),Ue=n(175),Ke=n.n(Ue),Le=(n(425),Fe.a.Item),Ye=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).submitNewWaterMelon=function(e){var t=n.state,a=t.startedAt,r=t.endedAt,o=t.description;return o?r&&a?a.valueOf()>r.valueOf()?ze.a.error("\u4e0d\u5408\u7406\u7684\u65f6\u95f4\u8bbe\u7f6e"):(n.props.addNewWaterMelon({started_at:a,ended_at:r,description:o,manually_created:!0}),void n.props.cancelAddPane()):ze.a.error("\u8bf7\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u586b\u5199\u597d[\u5f00\u59cb/\u7ed3\u675f]\u65f6\u95f4"):ze.a.error("\u8bf7\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u586b\u5199\u597d[\u897f\u74dc\u63cf\u8ff0]")},n.saveStartedAtTime=function(e){if(!e)return n.setState({startedAt:""});var t=new Date(e.toDate());if(t!==n.state.startedAt){var a=n.state.endedAt;if(!a)return n.setState({startedAt:t});if(t.valueOf()>a.valueOf())return ze.a.error("\u4e0d\u5408\u7406\u7684\u65f6\u95f4\u8bbe\u7f6e");n.setState({startedAt:t})}},n.saveEndedAtTime=function(e){if(!e)return n.setState({endedAt:""});var t=new Date(e.toDate());if(t!==n.state.endedAt){var a=n.state.startedAt;if(!a)return n.setState({endedAt:t});if(a.valueOf()>t.valueOf())return ze.a.error("\u4e0d\u5408\u7406\u7684\u65f6\u95f4\u8bbe\u7f6e");n.setState({endedAt:t})}},n.saveDescription=function(e){e.target.value!==n.state.description&&n.setState({description:e.target.value})},n.disabledDate=function(e){return e&&e.toDate()>new Date},n.state={startedAt:"",endedAt:"",description:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"new-watermelon-pane"},r.a.createElement(Fe.a,{onFinish:this.submitNewWaterMelon},r.a.createElement("div",null,r.a.createElement(Le,{label:"\u5f00\u59cb\u65e5\u671f"},r.a.createElement(Pe.a,{showTime:!0,onChange:this.saveStartedAtTime,locale:Ke.a,disabledDate:this.disabledDate,format:"YYYY-MM-DD HH:mm"}))),r.a.createElement("div",null,r.a.createElement(Le,{label:"\u7ed3\u675f\u65e5\u671f"},r.a.createElement(Pe.a,{showTime:!0,onChange:this.saveEndedAtTime,locale:Ke.a,disabledDate:this.disabledDate,format:"YYYY-MM-DD HH:mm"}))),r.a.createElement("div",null,r.a.createElement(Le,{label:"\ud83c\udf49 \u63cf\u8ff0"},r.a.createElement(C.a,{value:this.state.description,onChange:this.saveDescription}))),r.a.createElement("div",null,r.a.createElement(Le,null,r.a.createElement(Z.a,{className:"submit-btn",type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),r.a.createElement(Z.a,{type:"default",onClick:this.props.cancelAddPane,htmlType:"button"},"\u53d6\u6d88")))))}}]),t}(a.Component),Be=(n(523),Ee.a.TabPane),Ve=function(e,t){var n=e.datesKey,a=e.watermelons,o=e.itemType;return r.a.createElement("div",{className:"daily-watermelons",key:n},r.a.createElement("div",{className:"summary"},r.a.createElement("div",{className:"date-wrapper"},r.a.createElement("p",{className:"date"},r.a.createElement("span",{className:"year-month-day"},ke(n)),r.a.createElement("span",{className:"day"},Oe(n))),t||"")),r.a.createElement("div",{className:"watermelons-list"},a.map((function(e){return r.a.createElement(_e,{key:e.id,watermelon:e,itemType:o})}))))},qe=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).togglePagination=function(e){n.setState({currentPage:e})},n.toggleAbortedPagination=function(e){n.setState({abortedCurrentPage:e})},n.onChangeTab=function(e){e!==n.state.tabKey&&n.setState({tabKey:e})},n.cancelAddPane=function(){n.setState({isShowSupplyPane:!1})},n.addNewWaterMelon=function(e){n.setState({isShowSupplyPane:!0}),n.props.addNewWaterMelon(e)},n.onSupplyWaterMelonBtnClick=function(){n.setState({isShowSupplyPane:!n.state.isShowSupplyPane})},n.state={currentPage:1,abortedCurrentPage:1,tabKey:"1",isShowSupplyPane:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.finishedDatesKeys.map((function(t){var n=e.dailyFinishedWaterMelons[t],a={datesKey:t,watermelons:n,itemType:"finished"},o=r.a.createElement("p",{className:"finished-watermelons-count"},"\u5b8c\u6210\u4e86 ",n.length," \u4e2a\u897f\u74dc");return Ve(a,o)})),n=this.abortedDatesKeys.map((function(t){var n=e.dailyAbortedWaterMelons[t];return Ve({datesKey:t,watermelons:n,itemType:"aborted"})})),a=this.state.isShowSupplyPane?r.a.createElement(Ie.a,null):r.a.createElement(Re.a,null),o="1"===this.state.tabKey?r.a.createElement(We.a,{title:"\u8865\u8bb0\ud83c\udf49"},r.a.createElement(Z.a,{className:"supply-watermelon",icon:a,onClick:this.onSupplyWaterMelonBtnClick})):null;return r.a.createElement(Ee.a,{defaultActiveKey:"1",type:"card",tabBarExtraContent:o,onChange:this.onChangeTab},r.a.createElement(Be,{tab:"\u5b8c\u6210\u7684\ud83c\udf49",key:"1"},this.state.isShowSupplyPane?r.a.createElement(Ye,{cancelAddPane:this.cancelAddPane,addNewWaterMelon:this.addNewWaterMelon}):null,r.a.createElement("div",{className:"watermelons-history"},t),r.a.createElement("div",{className:"tab-pane-page-footer"},r.a.createElement(xe.a,{defaultCurrent:1,pageSize:3,hideOnSinglePage:!0,total:Object.keys(this.dailyFinishedWaterMelons).length,current:this.state.currentPage,onChange:this.togglePagination}),r.a.createElement("div",null),r.a.createElement("p",{className:"total-num-of-todos"},"\u603b\u8ba1 ",this.finishedTodosLength," \u4e2a\u5df2\u5b8c\u6210\u7684\u4efb\u52a1"))),r.a.createElement(Be,{tab:"\u6253\u65ad\u8bb0\u5f55",key:"2"},r.a.createElement("div",{className:"watermelons-history"},n),r.a.createElement("div",{className:"tab-pane-page-footer"},r.a.createElement(xe.a,{defaultCurrent:1,pageSize:3,hideOnSinglePage:!0,total:Object.keys(this.abortedWaterMelons).length,current:this.state.abortedCurrentPage,onChange:this.toggleAbortedPagination}),r.a.createElement("div",null),r.a.createElement("p",{className:"total-num-of-todos"},"\u603b\u8ba1 ",this.abortedTodosLength," \u4e2a\u6253\u65ad\u7684\u4efb\u52a1"))))}},{key:"finishedWaterMelons",get:function(){return this.props.waterMelons.filter((function(e){var t;return e.description&&e.ended_at&&!e.aborted&&!(null===e||void 0===e?void 0:null===(t=e.extra)||void 0===t?void 0:t.deleted)}))}},{key:"abortedWaterMelons",get:function(){return this.props.waterMelons.filter((function(e){var t;return e.aborted&&!(null===e||void 0===e?void 0:null===(t=e.extra)||void 0===t?void 0:t.deleted)}))}},{key:"dailyFinishedWaterMelons",get:function(){return de.a.groupBy(this.finishedWaterMelons,(function(e){return Object(re.a)(new Date(e.started_at),"yyyy-M-d")}))}},{key:"dailyAbortedWaterMelons",get:function(){return de.a.groupBy(this.abortedWaterMelons,(function(e){return Object(re.a)(new Date(e.started_at),"yyyy-M-d")}))}},{key:"finishedDatesKeys",get:function(){var e=this.state.currentPage;return Object.keys(this.dailyFinishedWaterMelons).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).slice(3*(e-1),3*e)}},{key:"abortedDatesKeys",get:function(){var e=this.state.abortedCurrentPage;return Object.keys(this.dailyAbortedWaterMelons).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).slice(3*(e-1),3*e)}},{key:"finishedTodosLength",get:function(){var e=this,t=0;return Object.keys(this.dailyFinishedWaterMelons).forEach((function(n){t+=e.dailyFinishedWaterMelons[n].length})),t}},{key:"abortedTodosLength",get:function(){var e=this,t=0;return Object.keys(this.dailyAbortedWaterMelons).forEach((function(n){t+=e.dailyAbortedWaterMelons[n].length})),t}}]),t}(a.Component),Ge=Object(S.b)((function(e,t){return Object(s.a)({waterMelons:e.waterMelonReducer},t)}))(qe),Je=n(543),Qe=(n(525),70),Xe=10,Ze=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).points=function(){var e=n.props,t=e.data,a=e.xRange,r=e.width,o=Object.keys(t).reduce((function(e,n){return e>t[n].length?e:t[n].length}),0);return 0===o&&(o=5),Object.keys(t).map((function(e){return[(new Date(e).getDate()-.5)/a*(r-Qe),160*(1-t[e].length/o)+Xe,t[e].length]}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dot-line"},r.a.createElement("svg",{width:"100%",height:"200"},r.a.createElement("rect",{x:0,y:0,width:"100%",height:170}),r.a.createElement("path",{d:this.points().reduce((function(e,t){return e.concat("".concat(t.slice(0,2).join(","),","))}),"M")}),this.points().map((function(e,t){return t%2===0?r.a.createElement("text",{key:t,x:e[0]-5,y:"200"},t+1):null})),this.points().map((function(t,n){return r.a.createElement(We.a,{key:n,placement:"top",title:"".concat(t[2]),overlayClassName:"daily_tips"},r.a.createElement("circle",{r:e.circleRadius,cx:t[0],cy:t[1]}))}))))}},{key:"circleRadius",get:function(){var e=this.props.width;return""+(e>707?5:5/707*e)}}]),t}(a.Component),$e=n(133),et=n.n($e),tt=(n(527),["YYYY","MM"]),nt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onChangeYear=function(e,t){e&&t&&n.state.currentYear!=="".concat(t)&&n.setState({currentYear:t})},n.onChangeMonth=function(e,t){e&&t&&n.state.currentMonth!=="".concat(t)&&n.setState({currentMonth:t})},n.state={currentMonth:Object(re.a)(new Date,"MM"),currentYear:Object(re.a)(new Date,"yyyy")},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.width,t=this.dotLineData,n=t.data,a=t.xRange,o=this.monthlyIncreaseNumber,i=L()({monthlyIncrease:!0,number:!0,growable:Number(o)>0});return r.a.createElement("div",{className:"monthly-history-core"},r.a.createElement("div",{className:"monthly-action"},r.a.createElement("span",{className:"monthly-action-title"},"\u5f53\u524d\u5e74\u6708: "),r.a.createElement("div",{className:"monthly-action-year"},r.a.createElement(Pe.a,{defaultValue:et()(this.state.currentYear,tt[0]),format:tt[0],onChange:this.onChangeYear,picker:"year",placeholder:"\u8bf7\u9009\u62e9\u5e74\u4efd"}),r.a.createElement("span",{className:"monthly-action-text"},"\u5e74")),r.a.createElement("div",{className:"monthly-action-month"},r.a.createElement(Pe.a,{defaultValue:et()(this.state.currentMonth,tt[1]),format:tt[1],mode:"month",onChange:this.onChangeMonth,picker:"month",placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd"}),r.a.createElement("span",{className:"monthly-action-text"},"\u6708"))),r.a.createElement("div",{className:"monthly-history-statistics-wrapper"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",{className:"number"},this.totalNumber),r.a.createElement("span",{className:"unit"},"\u603b\u6570")),r.a.createElement("li",null,r.a.createElement("strong",{className:"number"},this.daliyAverageNumber),r.a.createElement("span",{className:"unit"},"\u65e5\u5e73\u5747\u6570")),r.a.createElement("li",null,r.a.createElement("strong",{className:i},Number(o)>0?"+".concat(o):"-".concat(o)),r.a.createElement("span",{className:"unit"},"\u6708\u589e\u957f\u91cf"))),r.a.createElement(Ze,{data:n,xRange:a,width:e})))}},{key:"totalDays",get:function(){var e=this.state,t=e.currentMonth,n=e.currentYear;return Object(Je.a)(new Date("".concat(n,"-").concat(t,"-1")))}},{key:"totalNumber",get:function(){return this.monthData.length}},{key:"daliyAverageNumber",get:function(){return(this.totalNumber/this.totalDays).toFixed(2)}},{key:"monthlyIncreaseNumber",get:function(){var e=this.state,t=e.currentMonth,n=e.currentYear,a="01"===t?"".concat(Number(n)-1):n,r="".concat("01"===t?12:Number(t)-1);Number(r)<10&&(r="0".concat(r));var o=this.props.finishedData.filter((function(e){return Object(re.a)(new Date(e.calTime),"MM")===r})).filter((function(e){return Object(re.a)(new Date(e.calTime),"yyyy")===a})).length,i=((this.totalNumber-o)/o).toFixed(2);return Number(i)===1/0?i="1.00":Number(i)||(i="0"),i}},{key:"monthData",get:function(){var e=this.props.finishedData,t=this.state,n=t.currentMonth,a=t.currentYear;return e.filter((function(e){return Object(re.a)(new Date(e.calTime),"MM")===n})).filter((function(e){return Object(re.a)(new Date(e.calTime),"yyyy")===a}))}},{key:"dotLineData",get:function(){var e=this.state,t=e.currentMonth,n=e.currentYear,a=this.totalDays,r=Object(ge.a)(Array(a)),o=new Map;r.forEach((function(e,a){var r=a+1,i="".concat(n,"-").concat(t,"-").concat(r<10?"0".concat(r):r);o.set(i,[])})),this.monthData.forEach((function(e){var t=Object(re.a)(new Date(e.calTime),"yyyy-MM-dd"),n=o.get(t);n.push(e),o.set(t,n)}));var i={},s=!0,c=!1,l=void 0;try{for(var d,u=o[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var p=d.value,m=Object(te.a)(p,2),h=m[0],f=m[1];i[h]=f}}catch(g){c=!0,l=g}finally{try{s||null==u.return||u.return()}finally{if(c)throw l}}return{data:i,xRange:a}}}]),t}(a.Component),at=(n(529),Ee.a.TabPane),rt=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.width;return r.a.createElement(Ee.a,{defaultActiveKey:"1",type:"card"},r.a.createElement(at,{tab:"\ud83c\udf49\u7edf\u8ba1",key:"1"},r.a.createElement("div",{className:"monthly-history"},r.a.createElement(nt,{finishedData:this.finishedWaterMelons,width:e}))),r.a.createElement(at,{tab:"\u4efb\u52a1\u7edf\u8ba1",key:"2"},r.a.createElement("div",{className:"monthly-history"},r.a.createElement(nt,{finishedData:this.finishedTodos,width:e}))))}},{key:"finishedTodos",get:function(){return this.props.finishedTodos.map((function(e){return{calTime:e.updated_at,id:e.id}}))}},{key:"finishedWaterMelons",get:function(){return this.props.finishedWaterMelons.map((function(e){return{calTime:e.started_at,id:e.id}}))}}]),t}(a.Component),ot=(n(531),function(e){function t(e){var n,a,o;return Object(d.a)(this,t),(o=Object(p.a)(this,Object(m.a)(t).call(this,e))).ulRef=r.a.createRef(),o.liRef=r.a.createRef(),o.updateSize=function(){var e,t,n=(null===(e=o.liRef.current)||void 0===e?void 0:e.offsetWidth)||0,a=(null===(t=o.ulRef.current)||void 0===t?void 0:t.offsetWidth)||0;a<0&&(a=0),o.state.liWidth!==n&&o.setState({liWidth:n}),o.state.ulWidth!==a&&o.setState({ulWidth:a})},o.initMapVisible=function(e){var t=e.split(" ")[0],n=o.state.mapTitleVisible,a=n[t].visible;return n[t].visible=!a,Object.keys(n).map((function(e){return!t.includes(e)&&(n[e].visible=!1)})),n},o.addNewWaterMelon=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.awrap(H.post("/tomatoes",e));case 3:t=n.sent,o.props.addWaterMelon(t.data.resource),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),new Error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},o.state={mapTitleVisible:{monthlyTitle:{visible:!1},watermelonTitle:{visible:!1},todosTitle:{visible:!1}},liWidth:(null===(n=o.liRef.current)||void 0===n?void 0:n.offsetWidth)||0,ulWidth:(null===(a=o.ulRef.current)||void 0===a?void 0:a.offsetWidth)||0},o}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateSize)}},{key:"componentDidMount",value:function(){var e,t,n,a,r=this;this.updateSize(),window.addEventListener("resize",this.updateSize),e=this.ulRef.current,t="click",n="li",a=function(e,t){var n=t.className;r.setState({mapTitleVisible:Object(s.a)({},r.initMapVisible(n))})},e.addEventListener(t,(function(t){for(var r=t.target;!r.matches(n);){if(e===r){r=null;break}r=r.parentNode}r&&a.call(r,t,r)}))}},{key:"render",value:function(){var e=L()({monthlyTitle:!0,visible:this.state.mapTitleVisible.monthlyTitle.visible}),t=L()({watermelonTitle:!0,visible:this.state.mapTitleVisible.watermelonTitle.visible}),n=L()({todosTitle:!0,visible:this.state.mapTitleVisible.todosTitle.visible});return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"statistics",ref:this.ulRef},r.a.createElement("li",{className:e,ref:this.liRef},r.a.createElement("h3",{className:"title"},"\u7edf\u8ba1"),r.a.createElement("div",{className:"description-wrapper"},r.a.createElement("span",{className:"description"},(new Date).getMonth()+1,"\u6708\u7d2f\u8ba1\ud83d\udcc8"),r.a.createElement("span",{className:"number"},this.monthlyWaterMelonsLength)),r.a.createElement(we,{data:this.monthlyWaterMelons,finishedCount:this.state.liWidth})),r.a.createElement("li",{className:t},r.a.createElement("h3",{className:"title"},"\ud83c\udf49\u5386\u53f2"),r.a.createElement("div",{className:"description-wrapper"},r.a.createElement("span",{className:"description"},"\u7d2f\u8ba1\u5b8c\u6210\ud83c\udf49"),r.a.createElement("span",{className:"number"},this.finishedWaterMelons.length)),r.a.createElement(ye,{data:this.dailyWaterMelons,finishedCount:this.finishedWaterMelons.length,width:this.state.liWidth})),r.a.createElement("li",{className:n},r.a.createElement("h3",{className:"title"},"\u4efb\u52a1\ud83d\udc40\u5386\u53f2"),r.a.createElement("div",{className:"description-wrapper"},r.a.createElement("span",{className:"description"},"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1\ud83d\udc4c"),r.a.createElement("span",{className:"number"},this.finishedTodos.length)),r.a.createElement(ye,{data:this.dailyTodos,finishedCount:this.finishedTodos.length,width:this.state.liWidth}))),r.a.createElement("div",{className:"history-wrapper"},r.a.createElement("div",{className:e},r.a.createElement(rt,{finishedTodos:this.finishedTodos,finishedWaterMelons:this.finishedWaterMelons,width:this.state.ulWidth})),r.a.createElement("div",{className:t},r.a.createElement(Ge,{addNewWaterMelon:this.addNewWaterMelon})),r.a.createElement("div",{className:n},r.a.createElement(Se,null))))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"finishedWaterMelons",get:function(){return this.props.waterMelons.filter((function(e){var t;return e.description&&e.ended_at&&!e.aborted&&!(null===(t=e.extra)||void 0===t?void 0:t.deleted)}))}},{key:"dailyTodos",get:function(){return de.a.groupBy(this.finishedTodos,(function(e){return Object(re.a)(new Date(e.updated_at),"yyyy-MM-d")}))}},{key:"dailyWaterMelons",get:function(){return de.a.groupBy(this.finishedWaterMelons,(function(e){return Object(re.a)(new Date(e.updated_at),"yyyy-MM-d")}))}},{key:"monthlyWaterMelons",get:function(){var e=Object(ge.a)(Array(7)).map((function(){return[]}));return this.finishedWaterMelons.map((function(t){var n=new Date(t.created_at).getDay();return e[n].push(t)})),e}},{key:"monthlyWaterMelonsLength",get:function(){return this.finishedWaterMelons.filter((function(e){return new Date(e.started_at).getMonth()===(new Date).getMonth()})).length}}]),t}(a.Component)),it={addWaterMelon:se},st=Object(S.b)((function(e,t){return{todos:e.todosReducer,waterMelons:e.waterMelonReducer,ownProps:t}}),it)(ot),ct=function(){return function(e){var t,n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.a.awrap(H.get("/me"));case 3:t=a.sent,n=t.data,"/"!==E.location.pathname&&E.push("/"),e({type:"VERIFY_USER_SUCCESS",payload:n}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),"/"===E.location.pathname&&E.push("/login");case 12:case"end":return a.stop()}}),null,null,[[0,9]])}},lt=function(){return{type:"HAS_READ_USER_ERROR"}},dt=function(e,t){return function(n){var a,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,l.a.awrap(H.get(e));case 3:a=o.sent,r=a.data.resources,n({type:t,payload:r}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.log(o.t0);case 11:case"end":return o.stop()}}),null,null,[[0,8]])}},ut=function(e,t){return function(n){var a,r,o,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l.a.awrap(H.post(e,t));case 3:return s.next=5,l.a.awrap(H.get("/me"));case 5:a=s.sent,r=a.data,n({type:"VERIFY_USER_SUCCESS",payload:r}),E.push("/"),s.next=16;break;case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0.response),s.t0.response?(i=s.t0.response.data.errors,o=i.account?i.account:i):o="\u8bf7\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u6b63\u5e38",n({type:"VERIFY_USER_FAILURE",error:o});case 16:case"end":return s.stop()}}),null,null,[[0,11]])}},pt=(n(533),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.getUserInfo(),this.props.initWaterMelon(),this.props.initTodos();case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{id:"Home"},r.a.createElement(T,{userInfo:this.props.userInfo}),r.a.createElement("main",{className:"content"},r.a.createElement(fe,null),r.a.createElement(X,null)),r.a.createElement("main",{className:"statistics-content"},r.a.createElement(st,null)),r.a.createElement(N,null))}}]),t}(a.Component)),mt={initTodos:function(){return dt("/todos","FETCH_TODOS_SUCCESS")},initWaterMelon:function(){return dt("/tomatoes","FETCH_WATERMELON_SUCCESS")},getUserInfo:ct},ht=Object(S.b)((function(e,t){return Object(s.a)({},e,{userInfo:e.userReducer.userInfo})}),mt)(pt),ft=(n(218),n(134)),gt=n(555),yt=n(105),bt=(n(536),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e,t){var a={};a[e]=t.target.value,n.setState(a)},n.submit=function(){var e,t,a;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=n.state,t=e.account,a=e.password,t||ze.a.error("\u8d26\u53f7\u4e3a\u7a7a"),a||ze.a.error("\u5bc6\u7801\u4e3a\u7a7a"),t&&a){r.next=5;break}return r.abrupt("return");case 5:n.props.signIn({account:t,password:a});case 6:case"end":return r.stop()}}))},n.state={account:"",password:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.errorInfo;return r.a.createElement("div",{className:"page-login"},r.a.createElement("h1",{className:"login-header"},"\u767b\u5f55"),t?r.a.createElement(ft.a,{message:"string"===typeof t?t:t.reduce((function(e,t){return e.concat("+ ".concat(t))}),""),type:"error",showIcon:!0,closable:!0,onClose:function(){return e.props.hasReadErrorInfo()},style:{marginBottom:"15px"}}):null,r.a.createElement(Fe.a,{onFinish:this.submit},r.a.createElement(C.a,{className:"account-input",placeholder:"\u8d26\u53f7",allowClear:!0,prefix:r.a.createElement(y.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.onChange("account",t)},style:{marginBottom:"1em"}}),r.a.createElement(C.a.Password,{className:"password-input",placeholder:"\u5bc6\u7801",allowClear:!0,prefix:r.a.createElement(gt.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.onChange("password",t)}}),r.a.createElement(Z.a,{className:"login-btn",htmlType:"submit",type:"primary"},"\u767b\u5f55")),r.a.createElement("p",{className:"register-link"},"\u8fd8\u6ca1\u6709\u8d26\u53f7\uff1f",r.a.createElement(yt.a,{to:"/signUp"},"\u7acb\u5373\u6ce8\u518c")))}}]),t}(a.Component)),vt={getUserInfo:ct,signIn:function(e){return ut("/sign_in/user",e)},hasReadErrorInfo:lt},wt=Object(S.b)((function(e,t){return Object(s.a)({},e,{errorInfo:e.userReducer.error})}),vt)(bt),xt=n(556),Et=(n(539),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e,t){var a={};a[e]=t.target.value,n.setState(a)},n.submit=function(){var e,t,a,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=n.state,t=e.account,a=e.password,r=e.passwordConfirmed,t||ze.a.error("\u8d26\u53f7\u4e3a\u7a7a"),a||ze.a.error("\u5bc6\u7801\u4e3a\u7a7a"),r||ze.a.error("\u786e\u8ba4\u5bc6\u7801\u4e3a\u7a7a"),t&&a&&r){o.next=6;break}return o.abrupt("return");case 6:if(a===r){o.next=9;break}return ze.a.error("\u8f93\u5165\u5bc6\u7801\u8ddf\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4"),o.abrupt("return");case 9:n.props.register({account:t,password:a,password_confirmation:r});case 10:case"end":return o.stop()}}))},n.state={account:"",password:"",passwordConfirmed:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserInfo()}},{key:"render",value:function(){var e=this,t=this.props.errorInfo;return r.a.createElement("div",{className:"page-sign-up"},r.a.createElement("h1",{className:"sign-up-header"},"\u6ce8\u518c"),t?r.a.createElement(ft.a,{message:"string"===typeof t?t:"username"+t.reduce((function(e,t){return e.concat(" ".concat(t))}),""),type:"error",showIcon:!0,closable:!0,onClose:function(){return e.props.hasReadErrorInfo()},style:{marginBottom:"15px"}}):null,r.a.createElement(Fe.a,{onFinish:this.submit},r.a.createElement(C.a,{className:"account-input",placeholder:"\u8d26\u53f7",allowClear:!0,prefix:r.a.createElement(y.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.onChange("account",t)},style:{marginBottom:"1em"}}),r.a.createElement(C.a.Password,{className:"password-input",placeholder:"\u5bc6\u7801",allowClear:!0,prefix:r.a.createElement(gt.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.onChange("password",t)},style:{marginBottom:"1em"}}),r.a.createElement(C.a.Password,{className:"password-confirmed-input",placeholder:"\u786e\u8ba4\u5bc6\u7801",allowClear:!0,prefix:r.a.createElement(xt.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.onChange("passwordConfirmed",t)},style:{marginBottom:"1em"}}),r.a.createElement(Z.a,{className:"sign-up-btn",htmlType:"submit",type:"primary"},"\u6ce8\u518c")),r.a.createElement("p",{className:"login-link"},"\u5df2\u7ecf\u6709\u8d26\u53f7\uff1f",r.a.createElement(yt.a,{to:"/login"},"\u7acb\u5373\u767b\u5f55")))}}]),t}(a.Component)),Ot={getUserInfo:ct,register:function(e){return ut("/sign_up/user",e)},hasReadErrorInfo:lt},kt=Object(S.b)((function(e,t){return Object(s.a)({},e,{errorInfo:e.userReducer.error})}),Ot)(Et),jt=n(71),Tt=function(){return r.a.createElement(jt.b,{history:E},r.a.createElement("div",{className:"App"},r.a.createElement(jt.a,{path:"/",exact:!0,component:ht}),r.a.createElement(jt.a,{path:"/login",component:wt}),r.a.createElement(jt.a,{path:"/signUp",component:kt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nt=n(68),Mt=Object(Nt.combineReducers)({todosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(ge.a)(e),[t.payload]);case"FETCH_TODOS_SUCCESS":var n=t.payload.map((function(e){return Object.assign({},e,{editing:!1})}));return Object(ge.a)(n);case"INIT_TODOS":return Object(ge.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDITING_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},waterMelonReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_WATERMELON":return[t.payload].concat(Object(ge.a)(e));case"FETCH_WATERMELON_SUCCESS":case"INIT_WATERMELON":return Object(ge.a)(t.payload.map((function(e){return e.extra||(e.extra={},Object.assign(e.extra,{deleted:!1})),e})));case"UPDATE_WATERMELON":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userInfo:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VERIFY_USER_SUCCESS":return{userInfo:t.payload};case"VERIFY_USER_FAILURE":return Object(s.a)({},e,{error:t.error});case"HAS_READ_USER_ERROR":return Object(s.a)({},e,{error:null});default:return e}}}),Ct=n(243),Dt=(n(244),Object(Nt.applyMiddleware)(Ct.a));Dt=Dt;var St=Object(Nt.createStore)(Mt,Dt);i.a.render(r.a.createElement(S.a,{store:St},r.a.createElement(Tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[248,1,2]]]);
//# sourceMappingURL=main.a1cc8fd5.chunk.js.map